<!DOCTYPE html>
<html lang="ko" dir=>

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The Rust Programming Language">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Rust Basic" />
<meta property="og:description" content="The Rust Programming Language" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://prokoptasis.github.io/docs/documents/backend/rust/rust01/" />

<title>Rust Basic | Prokoptasis</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.001ba32d1ef4d2469d055e28d66fd96b16bfeddee698f1e2729af3a54ed86b8b.css" integrity="sha256-ABujLR700kadBV4o1m/Zaxa/7d7mmPHicprzpU7Ya4s=">
<script defer src="/ko.search.min.d4d788e81c0bdda964c3fea379c7883684cb650d2303b8131f03763f33f4dd70.js" integrity="sha256-1NeI6BwL3alkw/6jeceINoTLZQ0jA7gTHwN2PzP03XA="></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-176412981-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
 
</head>

<body dir=>
    <input type="checkbox" class="hidden toggle" id="menu-control" />
    <input type="checkbox" class="hidden toggle" id="toc-control" />
    <main class="container flex">
        <aside class="book-menu">
             <nav>
<h2 class="book-brand" style="text-align: center;">
    <a href="/"><span>Prokoptasis</span>
  </a>
</h2>
<hr>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





 


  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Documents</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bc65bd57d9bab5039e9a79b5ae591c72" class="toggle"  />
    <label for="section-bc65bd57d9bab5039e9a79b5ae591c72" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/projects/" class="">Projects</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/hugogirl/" class="">hU-Go-Girl</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/rust_sdl2/" class="">Rust_SDL2</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/defenders/" class="">Defenders</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/wordfighter/" class="">Wordfighter</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/qmodeler/" class="">Qmodeler</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/cube/" class="">Cube</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/projects/scmtemplate/" class="">SCM Template</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-53481227639f164d3f7ead2411c43315" class="toggle"  />
    <label for="section-53481227639f164d3f7ead2411c43315" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/frontend/" class="">Front End</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/frontend/markdown/" class="">Markdown</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7cff03fc158d9929dd882d45e5e83f84" class="toggle" checked />
    <label for="section-7cff03fc158d9929dd882d45e5e83f84" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/backend/" class="">Back End</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0480d4c0a3a48973d66dda9e8e9d50da" class="toggle" checked />
    <label for="section-0480d4c0a3a48973d66dda9e8e9d50da" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/backend/rust/" class="">Rust</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/rust/rust02/" class="">Rust Advanced</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/rust/rust01/" class=" active">Rust Basic</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0d89b8a13399f7331f6db819807b653c" class="toggle"  />
    <label for="section-0d89b8a13399f7331f6db819807b653c" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/backend/go/" class="">Go</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/go/go01/" class="">GO Basic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/go/go02/" class="">GO Advanced</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/go/go03/" class="">GO DB 연결</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-47bd3d4bf94d414a097efcbbc9ad3f79" class="toggle"  />
    <label for="section-47bd3d4bf94d414a097efcbbc9ad3f79" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/backend/sql/" class="">SQL</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/sql/sql01/" class="">SQL Basic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/backend/sql/sql02/" class="">SQL Advanced</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-08315e14cb91d15111d683212f692de5" class="toggle"  />
    <label for="section-08315e14cb91d15111d683212f692de5" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/deeplearning/" class="">Deep Learning</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/deeplearning/machinelearning/" class="">Machine Learning</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/deeplearning/tensorflow/" class="">Tensorflow</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ae112940aeb03e8cb2e77b93d2c01134" class="toggle"  />
    <label for="section-ae112940aeb03e8cb2e77b93d2c01134" class="flex justify-between">
      <a href="http://prokoptasis.github.io/docs/documents/english/" class="">English</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/english/seulsam/" class="">Seulsam</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://prokoptasis.github.io/docs/documents/english/pickedup/" class="">Picked Up English</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>










 
<ul>
    
    <li>
        <a href="/posts/" >
        Blog
      </a>
    </li>
    
    <li>
        <a href="mailto:c.exigua@gmail.com" target="_blank" rel="noopener" >
        Gmail
      </a>
    </li>
    
    <li>
        <a href="https://github.com/prokoptasis/prokoptasis" target="_blank" rel="noopener" >
        Github
      </a>
    </li>
    
    <li>
        <a href="https://twitter.com/prokoptasis" target="_blank" rel="noopener" >
        Twitter
      </a>
    </li>
    
    <li>
        <a href="https://www.facebook.com/c.exigua/" target="_blank" rel="noopener" >
        Facebook
      </a>
    </li>
    
</ul>
<br>
<hr>
<div style="display: block; text-align: center;">
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="prokoptasis" data-color="#e9e9e9" data-emoji="" data-font="Arial" data-text="" data-outline-color="#000" data-font-color="#000"
        data-coffee-color="#6f4e37"></script>
</div>
  

</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>

 
            
        </aside>

        <div class="book-page">
            <header class="book-header">
                 <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Rust Basic</strong>

  <label for="toc-control">
    
  </label>
</div>
  
                
            </header>

            
<article class="markdown"><h2 id="rust-basic-1">
  Rust Basic 1
  <a class="anchor" href="#rust-basic-1">#</a>
</h2>
<hr>
<p>Rust는 시스템 레벨의 프로그래밍 언어. C/C++의 대체 언어의 특성. 타입 안전성, 메모리 안전성, 동시성, 그리고 성능에도 초점을 맞추어 대규모, 고성능 소프트웨어의 개발을 작성하도록 설계됨. 무효한 메모리 접근을 예방하기 위해 빌림 검사와 같은 독특한 특성을 지님.</p>
<p>하기 링크 참조.</p>
<ul>
<li><a href="https://doc.rust-lang.org/1.30.0/book/second-edition/foreword.html/" target="_blank" rel="noopener">The Rust Programming Language</a></li>
<li><a href="https://rinthel.github.io/rust-lang-book-ko/" target="_blank" rel="noopener">The Rust Programming Language (KOR)</a></li>
</ul>
<h3 id="hello-world">
  Hello World
  <a class="anchor" href="#hello-world">#</a>
</h3>
<p>Hello World</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust">cargo init rust_hello <span style="color:#f92672">--</span>bin
cd rust_hello
cargo run
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello, world!&#34;</span>);
}

</code></pre></div><h3 id="guessing-game">
  Guessing Game
  <a class="anchor" href="#guessing-game">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>source</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> rand;

<span style="color:#66d9ef">use</span> rand::Rng;
<span style="color:#66d9ef">use</span> std::cmp::Ordering;
<span style="color:#66d9ef">use</span> std::io;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// 첫 줄 출력
</span><span style="color:#75715e"></span>	println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Guess the number!&#34;</span>);

	<span style="color:#75715e">// 1 부터 100까지의 숫자를 Rangdom으로 생성 후 secret_nmber로 선언
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> secret_number <span style="color:#f92672">=</span> rand::thread_rng().gen_range(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">101</span>);

    <span style="color:#66d9ef">loop</span> {
		<span style="color:#75715e">// 질문 출력
</span><span style="color:#75715e"></span>        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Please input your guess.&#34;</span>);

		<span style="color:#75715e">// guess를 mutable 형태의 string으로 생성
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> guess <span style="color:#f92672">=</span> String::new();

		<span style="color:#75715e">// guess의 입력을 받음
</span><span style="color:#75715e"></span>        io::stdin()
            .read_line(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> guess)
            .expect(<span style="color:#e6db74">&#34;Failed to read line&#34;</span>);

		<span style="color:#75715e">// guess를 trim하고 숫자로 전환
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> guess: <span style="color:#66d9ef">u32</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> guess.trim().parse() {
            Ok(num) <span style="color:#f92672">=&gt;</span> num,
            Err(_) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">continue</span>,
        };

		<span style="color:#75715e">// 사용자의 guess를 재출력
</span><span style="color:#75715e"></span>        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You guessed: {}&#34;</span>, guess);

		<span style="color:#75715e">// secret_number의 숫자를 비교하여 결과를 출력
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">match</span> guess.cmp(<span style="color:#f92672">&amp;</span>secret_number) {
            Ordering::Less <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Too small!&#34;</span>),
            Ordering::Greater <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Too big!&#34;</span>),
            Ordering::Equal <span style="color:#f92672">=&gt;</span> {
                println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You win!&#34;</span>);
                <span style="color:#66d9ef">break</span>;
            }
        }
    }
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>source check</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">let</span> foo <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;	<span style="color:#75715e">// immutable
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> bar <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;	<span style="color:#75715e">// mutable
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> baz <span style="color:#f92672">=</span> String::new();
</code></pre></div><p>기본적으로 let과 let mut은 변수의 가변성에 차이를 두고 다르게 선언하는 것을 의미.String::new는 String타입의 연관함수로 OO에서 클래스의 인스턴스 없이 호출할 수 있는 정적 메소드와 동일.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust">io::stdin()
	.read_line(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> guess)
	.expect(<span style="color:#e6db74">&#34;Failed to read line&#34;</span>);
</code></pre></div><p>프로그램의 시작점에 &lsquo;use std::io&rsquo;로 명시되었기 때문에 함수 호출시의 io::stdin은 표준 입력 핸들 타입인 std::io::Stdin을 돌려줌. &amp;mut guess를 넘겨받아 사용자의 입력을 저장하게 됨. 이때 사용자의 입력은 지속적으로 추가됨으로 가변 문자열이어야 함. 이때 &lsquo;&amp;mut&rsquo; 인 이유는 Rust에서는 &lsquo;&amp;&rsquo; c참조자의 기본 속성이 안전성을 위해 Immutable임으로 명시적으로 가변임을 지정할 필요가 있음. &lsquo;.expect&rsquo; 는 에러를 처리하는 메소드로 인스터스가 Error를 낼 경우 해당 메세지를 출력하며 동작을 멈추게 됨. 만일 &lsquo;expec&rsquo;없이 컴파일 한다면 경고가 표시됨.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">// place holder
</span><span style="color:#75715e"></span>println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You guessed: {}&#34;</span>, guess);
<span style="color:#75715e">// place holder 지정
</span><span style="color:#75715e"></span>println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You guessed: {g} number {n}&#34;</span>, g<span style="color:#f92672">=</span> guess,n <span style="color:#f92672">=</span> number);
</code></pre></div><p>위 문장에서 &lsquo;{}&rsquo; 부분은 변경자(Place Holder)로 guess의 표시 위치를 나타냄. 하나 이상의 Place Holder를 아래처럼 지정하여 사용할 수도 있음.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#a6e22e">Cargo</span>.<span style="color:#a6e22e">toml</span>
[<span style="color:#a6e22e">dependencies</span>]
<span style="color:#a6e22e">rand</span> = <span style="color:#e6db74">&#34;0.4.0&#34;</span>
</code></pre></div><p>Random 처리를 위해 Cargo.toml에 의존성을 추가하여 rand crate를 명시함.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">match</span> guess.cmp(<span style="color:#f92672">&amp;</span>secret_number) {
            Ordering::Less <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Too small!&#34;</span>),
            Ordering::Greater <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Too big!&#34;</span>),
            Ordering::Equal <span style="color:#f92672">=&gt;</span> {
                println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You win!&#34;</span>);
                <span style="color:#66d9ef">break</span>;
			}
</code></pre></div><p>사용자가 입력한 guess 숫자와 Random으로 생성된 secret_number를 비교하는 메소드. std 표준 라이브러리로부터 std::cmp::Ordering Scope를 가져와서 Ordering 타입을 사용하는 형태.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">let</span> guess: <span style="color:#66d9ef">u32</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> guess.trim().parse() {
	Ok(num) <span style="color:#f92672">=&gt;</span> num,
	Err(_) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">continue</span>,
};
</code></pre></div><p>입력된 guess의 문자열을 secret_number와 비교하기 위해 숫자로 바꾸는 라인. 기존 guess 변수를 triming된 숫자로 Shadowing하여 재사용하는 방식으로 구현됨. &lsquo;guess.trim()&lsquo;을 통해 사용자 입력시 들어온 Enter의 개행문자를 제거하고 &lsquo;parse()&lsquo;를 통해 숫자열로 파싱.  이때 u32와 같이 정확한 타입을 명시해야함. 사용자가 입력한 숫자에 특수문자 같은 것이 포함되어 u32로 전환할 수 없을 경우를 대비해서 expect와 같은 별도 처리가 필요할 수도 있음. 여기서는 Error가 들어올경우 continue를 통해 다음 Loop로 다시 시작되도록 처리 됨.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">loop</span> {
...
<span style="color:#66d9ef">match</span> guess.cmp(<span style="color:#f92672">&amp;</span>secret_number) {
		...
		Ordering::Equal <span style="color:#f92672">=&gt;</span> {
			println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;You win!&#34;</span>);
			<span style="color:#66d9ef">break</span>;
		}
}
</code></pre></div><p>main 프로그램은 Ordering::Equal이 나올때까지 Loop로 들어가 반복되며 수행됨.</p>

    </div>
  </label>
</div>

<h3 id="common-programming-concepts">
  Common Programming Concepts
  <a class="anchor" href="#common-programming-concepts">#</a>
</h3>
<p>Variables / Mutability / Data Types</p>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>variables / mutability / data types</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// immutable
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The value of x is: {}&#34;</span>, x);
    <span style="color:#75715e">// x = 7; // connot assign twice to immutable variable
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The value of x is: {}&#34;</span>, x);

    <span style="color:#75715e">// shadowing
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The value of x is: {}&#34;</span>, x);

    <span style="color:#75715e">// shadowing 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> spaces <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;   &#34;</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Spaces: {}&#34;</span>, spaces);
    <span style="color:#66d9ef">let</span> spaces <span style="color:#f92672">=</span> spaces.len();
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Spaces: {}&#34;</span>, spaces);

    <span style="color:#75715e">// mutable
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The value of x is: {}&#34;</span>, x);
    x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>; <span style="color:#75715e">// connot assign twice to immutable variable
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The value of x is: {}&#34;</span>, x);

    <span style="color:#75715e">// mutable
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> spaces <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;   &#34;</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Spaces: {}&#34;</span>, spaces);
    <span style="color:#75715e">// spaces = spaces.len(); //expected `&amp;str`, found `usize`
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Spaces: {}&#34;</span>, spaces);

    <span style="color:#75715e">// const
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> MAX_POINTS: <span style="color:#66d9ef">u32</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">100_000</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;MAX_POINTS: {}&#34;</span>, MAX_POINTS);

    <span style="color:#75715e">// let guess = &#34;42&#34;.parse().expect(&#34;Not a number!&#34;); // consider giving `guess` a type
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> guess: <span style="color:#66d9ef">u32</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;42&#34;</span>.parse().expect(<span style="color:#e6db74">&#34;Not a number!&#34;</span>);

    <span style="color:#75715e">// float
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> f1: <span style="color:#66d9ef">f64</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2.0</span>;
    <span style="color:#66d9ef">let</span> f2: <span style="color:#66d9ef">f32</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.0</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{},{}&#34;</span>, f1, f2);

    <span style="color:#75715e">// let addition
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> sum <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>;
    <span style="color:#75715e">// let subtraction
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> difference <span style="color:#f92672">=</span> <span style="color:#ae81ff">95.5</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">4.3</span>;
    <span style="color:#75715e">// let multiplication
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> product <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">30</span>;
    <span style="color:#75715e">// let division
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> quotient <span style="color:#f92672">=</span> <span style="color:#ae81ff">56.7</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">32.2</span>;
    <span style="color:#75715e">// let remainder
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> remainder <span style="color:#f92672">=</span> <span style="color:#ae81ff">43</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">5</span>;

    println<span style="color:#f92672">!</span>(
        <span style="color:#e6db74">&#34;let calc {},{},{},{},{}&#34;</span>,
        sum, difference, product, quotient, remainder
    );

    <span style="color:#75715e">// boolean
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> t <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
    <span style="color:#66d9ef">let</span> f: <span style="color:#66d9ef">bool</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;let bool {},{}&#34;</span>, t, f);

    <span style="color:#75715e">// character
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> c <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;z&#39;</span>;
    <span style="color:#66d9ef">let</span> z <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ℤ&#39;</span>;
    <span style="color:#66d9ef">let</span> cat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;😻&#39;</span>;

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;let char {},{},{}&#34;</span>, c, z, cat);

    <span style="color:#75715e">// tuple
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> tup: (<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">f64</span>, <span style="color:#66d9ef">u8</span>) <span style="color:#f92672">=</span> (<span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">6.4</span>, <span style="color:#ae81ff">1</span>);
    <span style="color:#66d9ef">let</span> (x, y, z) <span style="color:#f92672">=</span> tup;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;x : {}, y : {}, z : {}&#34;</span>, x, y, z);

    <span style="color:#66d9ef">let</span> x: (<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">f64</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>) <span style="color:#f92672">=</span>
        (<span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">6.4</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>);
    <span style="color:#66d9ef">let</span> five_hundred <span style="color:#f92672">=</span> x.<span style="color:#ae81ff">0</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;five_hundred : {}, x11 : {}&#34;</span>, five_hundred, x.<span style="color:#ae81ff">11</span>);

    <span style="color:#75715e">// Array
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> ary <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> mon <span style="color:#f92672">=</span> [
        <span style="color:#e6db74">&#34;Jan&#34;</span>, <span style="color:#e6db74">&#34;Feb&#34;</span>, <span style="color:#e6db74">&#34;Mar&#34;</span>, <span style="color:#e6db74">&#34;Apr&#34;</span>, <span style="color:#e6db74">&#34;May&#34;</span>, <span style="color:#e6db74">&#34;Jun&#34;</span>, <span style="color:#e6db74">&#34;Jul&#34;</span>, <span style="color:#e6db74">&#34;Aug&#34;</span>, <span style="color:#e6db74">&#34;Sep&#34;</span>, <span style="color:#e6db74">&#34;Oct&#34;</span>, <span style="color:#e6db74">&#34;Nov&#34;</span>, <span style="color:#e6db74">&#34;Dec&#34;</span>,
    ];

    <span style="color:#66d9ef">let</span> index <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
    <span style="color:#75715e">// let index = 12; // panicked at &#39;index out of bounds: the len is 12 but the index is 12&#39;
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">let</span> frst <span style="color:#f92672">=</span> ary[<span style="color:#ae81ff">0</span>];
    <span style="color:#66d9ef">let</span> scnd <span style="color:#f92672">=</span> mon[<span style="color:#ae81ff">1</span>];
    <span style="color:#66d9ef">let</span> thrd <span style="color:#f92672">=</span> mon[index];

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;frst : {} , scnd : {} , thrd : {}&#34;</span>, frst, scnd, thrd);
}
</code></pre></div>
    </div>
  </label>
</div>

<p>Functions</p>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>functions</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello, world!&#34;</span>);
    <span style="color:#75715e">// function
</span><span style="color:#75715e"></span>    function_a();

    <span style="color:#75715e">// function parameter
</span><span style="color:#75715e"></span>    function_b(<span style="color:#ae81ff">3</span>);

    <span style="color:#75715e">// function parameters
</span><span style="color:#75715e"></span>    function_c(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>);

    <span style="color:#75715e">// statement
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> stmt1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;stmt1 : {}&#34;</span>, stmt1);
    <span style="color:#75715e">// let stmt1 = (let stmt2 = 5); // variable declaration using `let` is a statement
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> stmt1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;

    <span style="color:#75715e">// expression
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> stmt2 <span style="color:#f92672">=</span> {
        <span style="color:#66d9ef">let</span> stmt1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
        stmt1 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
    };
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;stmt1 : {}, stmt2 : {}&#34;</span>, stmt1, stmt2);

    <span style="color:#75715e">// function with return values
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> stmt3 <span style="color:#f92672">=</span> function_d();
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;stmt3 : {}&#34;</span>, stmt3);

    <span style="color:#75715e">// function with return values
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> stmt4 <span style="color:#f92672">=</span> function_e(<span style="color:#ae81ff">5</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;stmt4 : {}&#34;</span>, stmt4);
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">function_a</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello, again!&#34;</span>)
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">function_b</span>(x: <span style="color:#66d9ef">i32</span>) {
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">0</span>..x {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} : Hello, again!&#34;</span>, i)
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">function_c</span>(x: <span style="color:#66d9ef">i32</span>, y: <span style="color:#66d9ef">i32</span>) {
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> x..y {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}: Hello, again! {},{}&#34;</span>, i, x, y)
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">function_d</span>() -&gt; <span style="color:#66d9ef">i32</span> {
    <span style="color:#ae81ff">5</span>
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">function_e</span>(x: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    <span style="color:#75715e">// without semicolon
</span><span style="color:#75715e"></span>    x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
}

</code></pre></div>
    </div>
  </label>
</div>

<p>Contrl Flow</p>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>control flow</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// if else 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> number <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;

    <span style="color:#66d9ef">if</span> number <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} condition was true&#34;</span>, number);
    } <span style="color:#66d9ef">else</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} condition was false&#34;</span>, number);
    };

    <span style="color:#75715e">// if else 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> number <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;

    <span style="color:#66d9ef">if</span> number <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} condition was true&#34;</span>, number);
    } <span style="color:#66d9ef">else</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} condition was false&#34;</span>, number);
    };

    <span style="color:#75715e">// if else 3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> number <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} number was soething other than zero&#34;</span>, number);
    };

    <span style="color:#75715e">// if else 4
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> number <span style="color:#f92672">%</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} number is divisible by 4&#34;</span>, number)
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> number <span style="color:#f92672">%</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} number is divisible by 3&#34;</span>, number)
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> number <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} number is divisible by 2&#34;</span>, number)
    } <span style="color:#66d9ef">else</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} number is not divisible by 4,3,2&#34;</span>, number)
    };

    <span style="color:#75715e">// if with let
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> cond <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
    <span style="color:#66d9ef">let</span> numb <span style="color:#f92672">=</span> <span style="color:#66d9ef">if</span> cond { <span style="color:#ae81ff">5</span> } <span style="color:#66d9ef">else</span> { <span style="color:#ae81ff">6</span> };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;This value of numb is : {}&#34;</span>, numb);

    <span style="color:#75715e">// while
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> numc <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
    <span style="color:#66d9ef">while</span> numc <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, numc);
        numc <span style="color:#f92672">=</span> numc <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    }
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;numc : {}&#34;</span>, numc);

    <span style="color:#75715e">// for collection
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> arry <span style="color:#f92672">=</span> [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>];
    <span style="color:#66d9ef">for</span> elem <span style="color:#66d9ef">in</span> arry.iter() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;the value is: {}&#34;</span>, elem);
    }

    <span style="color:#75715e">// for range rev
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> numd <span style="color:#66d9ef">in</span> (<span style="color:#ae81ff">1</span>..<span style="color:#ae81ff">4</span>).rev() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}!&#34;</span>, numd);
    }
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="understanding-ownership">
  Understanding Ownership
  <a class="anchor" href="#understanding-ownership">#</a>
</h3>
<p><img src="../../../../../201026_01_rust_stack_and_heap.png" alt="stakc vs heap" /></p>
<p>Stack vs Heap
스택은 값을 받아들인 순서대로 저장하고 반대 방향으로 값을 지우는 방식. (Last In, First Out) 힙은 특정 공간을 할당하고 위치 검색을 통해 값을 불러 오는 방식.</p>
<table>
<thead>
<tr>
<th style="text-align:center">구분</th>
<th style="text-align:center">Stack</th>
<th style="text-align:center">Heap</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">관리</td>
<td style="text-align:center">CPU</td>
<td style="text-align:center">Programmer</td>
</tr>
<tr>
<td style="text-align:center">속도</td>
<td style="text-align:center">빠름</td>
<td style="text-align:center">느림</td>
</tr>
<tr>
<td style="text-align:center">범위</td>
<td style="text-align:center">지역</td>
<td style="text-align:center">전역</td>
</tr>
<tr>
<td style="text-align:center">크기</td>
<td style="text-align:center">제한</td>
<td style="text-align:center">제한없음</td>
</tr>
</tbody>
</table>
<p>Shallow Copy vs Deep Copy
Rust는 Shallow Copy를 Move라 표현. 명시적으로 표시하지 않는 이상 Deep Copy는 발생되지 않음.</p>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>ownership</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// move
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;hello&#34;</span>);
    <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> str1; <span style="color:#75715e">// shallow copy
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//println!(&#34;{}&#34;, str1); // move occurs because `str1` has type `std::string::String`
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str2);

    <span style="color:#75715e">// function takes ownership
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str3 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;world&#34;</span>);
    take_owns(str3);

    <span style="color:#75715e">//println!(&#34;{}&#34;, str3); //value borrowed here after move
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// integer copy to function
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> intg <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
    make_copy(<span style="color:#ae81ff">5</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, intg);

    <span style="color:#75715e">//
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str4 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;again&#34;</span>);
    <span style="color:#66d9ef">let</span> str5 <span style="color:#f92672">=</span> take_back(str4);

    <span style="color:#75715e">//println!(&#34;{}&#34;, str4); //move occurs because `str4` has type `std::string::String`
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str5);

    <span style="color:#75715e">// Reference
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str6 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;This is a pen&#34;</span>);
    <span style="color:#66d9ef">let</span> leng <span style="color:#f92672">=</span> calc_leng(<span style="color:#f92672">&amp;</span>str6);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The length of &#39;{}&#39; is {}&#34;</span>, str6, leng);

    <span style="color:#75715e">// Reference
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str7 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;This is a book&#34;</span>);
    chng_strg(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> str7);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str7);

    <span style="color:#75715e">// Reference mutable
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str8 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;text1&#34;</span>);
    <span style="color:#66d9ef">let</span> str9 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> str8; <span style="color:#75715e">//first mutable borrow occurs here
</span><span style="color:#75715e"></span>                          <span style="color:#75715e">// let str10 = &amp;mut str8; //second mutable borrow occurs here
</span><span style="color:#75715e"></span>
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str9);
    <span style="color:#75715e">// println!(&#34;{}&#34;, str10)
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Reference mutable 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str11 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;text2&#34;</span>);
    {
        <span style="color:#66d9ef">let</span> str12 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> str11;
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str12);
    }

    <span style="color:#66d9ef">let</span> str13 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> str11;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str13);

    <span style="color:#75715e">// Reference mutable 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str14 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;text3&#34;</span>);

    <span style="color:#66d9ef">let</span> str15 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str14;
    <span style="color:#66d9ef">let</span> str16 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str14;
    <span style="color:#75715e">// let str17 = &amp;mut str14; //mutable borrow occurs here
</span><span style="color:#75715e"></span>
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str15);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str16);
    <span style="color:#75715e">// println!(&#34;{}&#34;, str17);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// dangling references
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> noth <span style="color:#f92672">=</span> dang_refr();
    println<span style="color:#f92672">!</span>();

    <span style="color:#75715e">// slice
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str17 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;fffirst words&#34;</span>);
    <span style="color:#66d9ef">let</span> str18 <span style="color:#f92672">=</span> frst_word(<span style="color:#f92672">&amp;</span>str17);
    str17.clear();
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str18);

    <span style="color:#75715e">// string slice
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str19 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;hello world&#34;</span>);
    <span style="color:#66d9ef">let</span> str20 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str19[<span style="color:#ae81ff">0</span>..<span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> str21 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str19[<span style="color:#ae81ff">6</span>..<span style="color:#ae81ff">11</span>];
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{},{},{}&#34;</span>, str19, str20, str21);

    <span style="color:#66d9ef">let</span> str22 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str19[..<span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> leng <span style="color:#f92672">=</span> str19.len();
    <span style="color:#66d9ef">let</span> str23 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str19[<span style="color:#ae81ff">6</span>..leng];

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{},{},{}&#34;</span>, str22, leng, str23);

    <span style="color:#75715e">// literal slice
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str24 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;hello world&#34;</span>);
    <span style="color:#66d9ef">let</span> str25 <span style="color:#f92672">=</span> frst_word_s(<span style="color:#f92672">&amp;</span>str24);
    <span style="color:#75715e">// str24.clear(); // mutable borrow occurs here
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;str25 {}&#34;</span>, str25);

    <span style="color:#75715e">// literal slice
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str26 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;hello world&#34;</span>);
    <span style="color:#66d9ef">let</span> str27 <span style="color:#f92672">=</span> frst_word_s(<span style="color:#f92672">&amp;</span>str26[..]);
    <span style="color:#66d9ef">let</span> str28 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;HELLO WORLD&#34;</span>;
    <span style="color:#66d9ef">let</span> str27 <span style="color:#f92672">=</span> frst_word_s(<span style="color:#f92672">&amp;</span>str28[..]);
    <span style="color:#66d9ef">let</span> str27 <span style="color:#f92672">=</span> frst_word_s(str28);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;str27 {}&#34;</span>, str27);

    <span style="color:#75715e">// etc slice
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> intg <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> ints <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>intg[<span style="color:#ae81ff">1</span>..<span style="color:#ae81ff">3</span>];
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}{}&#34;</span>, ints[<span style="color:#ae81ff">0</span>], ints[<span style="color:#ae81ff">1</span>])
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">take_owns</span>(strg: String) {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, strg);
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">make_copy</span>(intg: <span style="color:#66d9ef">i32</span>) {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, intg);
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">take_back</span>(strg: String) -&gt; String {
    strg
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">calc_leng</span>(strg: <span style="color:#66d9ef">&amp;</span>String) -&gt; <span style="color:#66d9ef">usize</span> {
    strg.len()
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">chng_strg</span>(strg: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> String) {
    strg.push_str(<span style="color:#e6db74">&#34;,Hello?&#34;</span>);
}

<span style="color:#75715e">// this function&#39;s return type contains a borrowed value
</span><span style="color:#75715e">// fn dang_refr() -&gt; &amp;String {
</span><span style="color:#75715e">//     let strg = String::from(&#34;Eh?&#34;);
</span><span style="color:#75715e">//     &amp;strg
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">dang_refr</span>() -&gt; String {
    <span style="color:#66d9ef">let</span> strg <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Eh?&#34;</span>);
    strg
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">frst_word</span>(strg: <span style="color:#66d9ef">&amp;</span>String) -&gt; <span style="color:#66d9ef">usize</span> {
    <span style="color:#66d9ef">let</span> bytes <span style="color:#f92672">=</span> strg.as_bytes();

    <span style="color:#66d9ef">for</span> (i, <span style="color:#f92672">&amp;</span>item) <span style="color:#66d9ef">in</span> bytes.iter().enumerate() {
        <span style="color:#66d9ef">if</span> item <span style="color:#f92672">==</span> <span style="color:#e6db74">b&#39; &#39;</span> {
            <span style="color:#66d9ef">return</span> i;
        }
    }
    strg.len()
}

<span style="color:#75715e">// fn frst_word_s(strg: &amp;String) -&gt; &amp;str {
</span><span style="color:#75715e">//     let bytes = strg.as_bytes();
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//     for (i, &amp;item) in bytes.iter().enumerate() {
</span><span style="color:#75715e">//         if item == b&#39; &#39; {
</span><span style="color:#75715e">//             return &amp;strg[0..i];
</span><span style="color:#75715e">//         }
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">//     &amp;strg[..]
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">frst_word_s</span>(strg: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span> {
    <span style="color:#66d9ef">let</span> bytes <span style="color:#f92672">=</span> strg.as_bytes();

    <span style="color:#66d9ef">for</span> (i, <span style="color:#f92672">&amp;</span>item) <span style="color:#66d9ef">in</span> bytes.iter().enumerate() {
        <span style="color:#66d9ef">if</span> item <span style="color:#f92672">==</span> <span style="color:#e6db74">b&#39; &#39;</span> {
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span>strg[<span style="color:#ae81ff">0</span>..i];
        }
    }
    <span style="color:#f92672">&amp;</span>strg[..]
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="using-structs">
  Using Structs
  <a class="anchor" href="#using-structs">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>struct / function</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">User</span> {
    name: String,
    mail: String,
    sign: <span style="color:#66d9ef">u64</span>,
    actv: <span style="color:#66d9ef">bool</span>,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add_user</span>(mail: String, name: String) -&gt; <span style="color:#a6e22e">User</span> {
    User {
        name,
        mail,
        sign: <span style="color:#ae81ff">1</span>,
        actv: <span style="color:#a6e22e">true</span>,
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Color</span>(<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>);
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Point</span>(<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>);

<span style="color:#75715e">// Struct with reference (Lifetimes)
</span><span style="color:#75715e">// struct UserLife {
</span><span style="color:#75715e">//     name: &amp;str, // expected named lifetime parameter
</span><span style="color:#75715e">//     mail: &amp;str, // expected named lifetime parameter
</span><span style="color:#75715e">//     sign: u64,
</span><span style="color:#75715e">//     actv: bool,
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// struct 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">area1</span>(leng: <span style="color:#66d9ef">u32</span>, wdth: <span style="color:#66d9ef">u32</span>) -&gt; <span style="color:#66d9ef">u32</span> {
    leng <span style="color:#f92672">*</span> wdth
}

<span style="color:#75715e">// struct 2
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">area2</span>(dims: (<span style="color:#66d9ef">u32</span>, <span style="color:#66d9ef">u32</span>)) -&gt; <span style="color:#66d9ef">u32</span> {
    dims.<span style="color:#ae81ff">0</span> <span style="color:#f92672">*</span> dims.<span style="color:#ae81ff">1</span>
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#75715e">// struct 3
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rect</span> {
    leng: <span style="color:#66d9ef">u32</span>,
    wdth: <span style="color:#66d9ef">u32</span>,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">area3</span>(rect: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">Rect</span>) -&gt; <span style="color:#66d9ef">u32</span> {
    rect.leng <span style="color:#f92672">*</span> rect.wdth
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#75715e">// struct 4
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rectangle</span> {
    length: <span style="color:#66d9ef">u32</span>,
    width: <span style="color:#66d9ef">u32</span>,
}

<span style="color:#66d9ef">impl</span> Rectangle {
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">area</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">u32</span> {
        self.length <span style="color:#f92672">*</span> self.width
    }

    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">hold</span>(<span style="color:#f92672">&amp;</span>self, othr: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">Rectangle</span>) -&gt; <span style="color:#66d9ef">bool</span> {
        self.length <span style="color:#f92672">&gt;</span> othr.length <span style="color:#f92672">&amp;&amp;</span> self.width <span style="color:#f92672">&gt;</span> othr.width
    }

    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">sqre</span>(size: <span style="color:#66d9ef">u32</span>) -&gt; <span style="color:#a6e22e">Rectangle</span> {
        Rectangle {
            length: <span style="color:#a6e22e">size</span>,
            width: <span style="color:#a6e22e">size</span>,
        }
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// struct
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> user1 <span style="color:#f92672">=</span> User {
        name: String::from(<span style="color:#e6db74">&#34;Jake&#34;</span>),
        mail: String::from(<span style="color:#e6db74">&#34;admin@abc.com&#34;</span>),
        sign: <span style="color:#ae81ff">1</span>,
        actv: <span style="color:#a6e22e">true</span>,
    };

    <span style="color:#66d9ef">let</span> user2 <span style="color:#f92672">=</span> User {
        name: String::from(<span style="color:#e6db74">&#34;Hans&#34;</span>),
        mail: String::from(<span style="color:#e6db74">&#34;aaa@abc.com&#34;</span>),
        sign: <span style="color:#a6e22e">user1</span>.sign,
        actv: <span style="color:#a6e22e">user1</span>.actv,
    };

    <span style="color:#66d9ef">let</span> user3 <span style="color:#f92672">=</span> User {
        name: String::from(<span style="color:#e6db74">&#34;Dale&#34;</span>),
        mail: String::from(<span style="color:#e6db74">&#34;aaa@abc.com&#34;</span>),
        ..user1
    };

    <span style="color:#75715e">// tuple
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, user1.name);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, user2.name);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, user3.name);

    <span style="color:#66d9ef">let</span> blck <span style="color:#f92672">=</span> Color(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
    <span style="color:#66d9ef">let</span> orgn <span style="color:#f92672">=</span> Point(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);

    <span style="color:#75715e">// // struct with reference
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let user1 = User {
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     name: String::from(&#34;Jake&#34;),
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     mail: String::from(&#34;admin@abc.com&#34;),
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     sign: 1,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     actv: true,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// };
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">let</span> leng <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>;
    <span style="color:#66d9ef">let</span> wdth <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, area1(leng, wdth));
    <span style="color:#66d9ef">let</span> rect1 <span style="color:#f92672">=</span> (<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">30</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, area2(rect1));

    <span style="color:#66d9ef">let</span> rect2 <span style="color:#f92672">=</span> Rect { leng: <span style="color:#ae81ff">50</span>, wdth: <span style="color:#ae81ff">30</span> };
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, area3(<span style="color:#f92672">&amp;</span>rect2));

    <span style="color:#75715e">// derive(Debug)
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;rect is {:?}&#34;</span>, rect2);

    <span style="color:#75715e">// struct implementation
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> rect3 <span style="color:#f92672">=</span> Rectangle {
        length: <span style="color:#ae81ff">50</span>,
        width: <span style="color:#ae81ff">30</span>,
    };
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?},{}&#34;</span>, rect3, rect3.area());

    <span style="color:#66d9ef">let</span> rect4 <span style="color:#f92672">=</span> Rectangle {
        length: <span style="color:#ae81ff">50</span>,
        width: <span style="color:#ae81ff">30</span>,
    };
    <span style="color:#66d9ef">let</span> rect5 <span style="color:#f92672">=</span> Rectangle {
        length: <span style="color:#ae81ff">40</span>,
        width: <span style="color:#ae81ff">10</span>,
    };
    <span style="color:#66d9ef">let</span> rect6 <span style="color:#f92672">=</span> Rectangle {
        length: <span style="color:#ae81ff">45</span>,
        width: <span style="color:#ae81ff">60</span>,
    };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;rect4 hold rect5 {}&#34;</span>, rect4.hold(<span style="color:#f92672">&amp;</span>rect5));
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;rect4 hold rect6 {}&#34;</span>, rect4.hold(<span style="color:#f92672">&amp;</span>rect6));

    <span style="color:#75715e">// associated functions
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> sqre <span style="color:#f92672">=</span> Rectangle::sqre(<span style="color:#ae81ff">3</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;sqre : {:?}&#34;</span>, sqre)
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="enums-and-pattern-matching">
  Enums and Pattern Matching
  <a class="anchor" href="#enums-and-pattern-matching">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>enums</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">IpAddrKind</span> {
    V4,
    V6,
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">IpAddr</span> {
    kind: <span style="color:#a6e22e">IpAddrKind</span>,
    addr: String,
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">IpAddrStr</span> {
    V4(String),
    V6(String),
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">IpAddrU8</span> {
    V4(<span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>, <span style="color:#66d9ef">u8</span>),
    V6(String),
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">IpAddrStrc</span> {
    V4(Ipv4Addr),
    V6(Ipv6Addr),
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Ipv4Addr</span> {
    addr: String,
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Ipv6Addr</span> {
    addr: String,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">route</span>(ip_type: <span style="color:#a6e22e">IpAddrKind</span>) {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, ip_type)
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Mssg</span> {
    Quit,
    Move { x: <span style="color:#66d9ef">i32</span>, y: <span style="color:#66d9ef">i32</span> },
    Write(String),
    ChangeColor(<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>),
}

<span style="color:#66d9ef">impl</span> Mssg {
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">call</span>(<span style="color:#f92672">&amp;</span>self) {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Mssg::call&#34;</span>)
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">QuitMessage</span>;
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">MoveMessage</span> {
    x: <span style="color:#66d9ef">i32</span>,
    y: <span style="color:#66d9ef">i32</span>,
}
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">WriteMessage</span>(String);
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ChangeColorMessage</span>(<span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>);

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Optn</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> {
    Some(T),
    None,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// enum 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> ip4 <span style="color:#f92672">=</span> IpAddrKind::V4;
    <span style="color:#66d9ef">let</span> ip6 <span style="color:#f92672">=</span> IpAddrKind::V6;

    route(IpAddrKind::V4);
    route(IpAddrKind::V6);
    route(ip4);
    route(ip6);

    <span style="color:#75715e">// enum 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> home <span style="color:#f92672">=</span> IpAddr {
        kind: <span style="color:#a6e22e">IpAddrKind</span>::V4,
        addr: String::from(<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>),
    };

    <span style="color:#66d9ef">let</span> lbck <span style="color:#f92672">=</span> IpAddr {
        kind: <span style="color:#a6e22e">IpAddrKind</span>::V6,
        addr: String::from(<span style="color:#e6db74">&#34;::1&#34;</span>),
    };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, home);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, lbck);

    <span style="color:#75715e">// enum 3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> home <span style="color:#f92672">=</span> IpAddrStr::V4(String::from(<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>));
    <span style="color:#66d9ef">let</span> lbck <span style="color:#f92672">=</span> IpAddrStr::V6(String::from(<span style="color:#e6db74">&#34;::1&#34;</span>));

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, home);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, lbck);

    <span style="color:#75715e">// enum 4
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> home <span style="color:#f92672">=</span> IpAddrU8::V4(<span style="color:#ae81ff">127</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>);
    <span style="color:#66d9ef">let</span> lbck <span style="color:#f92672">=</span> IpAddrU8::V6(String::from(<span style="color:#e6db74">&#34;::1&#34;</span>));
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, home);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, lbck);

    <span style="color:#75715e">// enum 5
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> home <span style="color:#f92672">=</span> IpAddrStrc::V4(Ipv4Addr {
        addr: String::from(<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>),
    });
    <span style="color:#66d9ef">let</span> lbck <span style="color:#f92672">=</span> IpAddrStrc::V6(Ipv6Addr {
        addr: String::from(<span style="color:#e6db74">&#34;::1&#34;</span>),
    });
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, home);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, lbck);

    <span style="color:#75715e">// enum 6
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> mssg <span style="color:#f92672">=</span> Mssg::Write(String::from(<span style="color:#e6db74">&#34;Hello&#34;</span>));
    mssg.call();

    <span style="color:#75715e">// enum 7
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> numb <span style="color:#f92672">=</span> Some(<span style="color:#ae81ff">5</span>);
    <span style="color:#66d9ef">let</span> strg <span style="color:#f92672">=</span> Some(<span style="color:#e6db74">&#34;A string&#34;</span>);
    <span style="color:#66d9ef">let</span> abst: Option<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> None;

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, numb);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, strg);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, abst);
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>match</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">UsState</span> {
    Alabama,
    Alaska,
}

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Coin</span> {
    Penny,
    Nickel,
    Dime,
    Quater(UsState),
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">value_in_cents</span>(coin: <span style="color:#a6e22e">Coin</span>) -&gt; <span style="color:#66d9ef">u32</span> {
    <span style="color:#75715e">// enum &amp; match
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">match</span> coin {
        Coin::Penny <span style="color:#f92672">=&gt;</span> {
            println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Lucky penny!&#34;</span>);
            <span style="color:#ae81ff">1</span>
        }
        Coin::Nickel <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5</span>,
        Coin::Dime <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10</span>,
        Coin::Quater(state) <span style="color:#f92672">=&gt;</span> {
            println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;State quater from {:?}!&#34;</span>, state);
            <span style="color:#ae81ff">25</span>
        }
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">plus_one</span>(x: Option<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span>) -&gt; Option<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">match</span> x {
        None <span style="color:#f92672">=&gt;</span> None,
        Some(i) <span style="color:#f92672">=&gt;</span> Some(i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>),
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// enum 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> coin1 <span style="color:#f92672">=</span> Coin::Penny;
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, value_in_cents(coin1));

    <span style="color:#75715e">// enum2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> coin2 <span style="color:#f92672">=</span> Coin::Quater(UsState::Alaska);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, value_in_cents(coin2));

    <span style="color:#75715e">// Option&lt;T&gt; Matching
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> five <span style="color:#f92672">=</span> Some(<span style="color:#ae81ff">5</span>);
    <span style="color:#66d9ef">let</span> six <span style="color:#f92672">=</span> plus_one(five);
    <span style="color:#66d9ef">let</span> none <span style="color:#f92672">=</span> plus_one(None);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, five);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, six);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, none);

    <span style="color:#75715e">// Placeholder
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> some_u8_value <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">u8</span>;
    <span style="color:#66d9ef">match</span> some_u8_value {
        <span style="color:#ae81ff">1</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;one&#34;</span>),
        <span style="color:#ae81ff">3</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;three&#34;</span>),
        <span style="color:#ae81ff">5</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;five&#34;</span>),
        <span style="color:#ae81ff">6</span> <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;seven&#34;</span>),
        <span style="color:#ae81ff">7</span> <span style="color:#f92672">=&gt;</span> (),
        _ <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;???&#34;</span>),
    }

    <span style="color:#66d9ef">let</span> some_u8_value <span style="color:#f92672">=</span> Some(<span style="color:#ae81ff">3</span>);

    <span style="color:#75715e">// before if let
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">match</span> some_u8_value {
        Some(<span style="color:#ae81ff">3</span>) <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;three&#34;</span>),
        _ <span style="color:#f92672">=&gt;</span> (),
    }

    <span style="color:#75715e">// after if let (syntax sugar)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(<span style="color:#ae81ff">3</span>) <span style="color:#f92672">=</span> some_u8_value {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Three&#34;</span>);
    }

    <span style="color:#75715e">// let mut / if let else
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> coin2 <span style="color:#f92672">=</span> Coin::Quater(UsState::Alaska);
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">match</span> coin2 {
        Coin::Quater(state) <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;State {:?}&#34;</span>, state),
        _ <span style="color:#f92672">=&gt;</span> count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>,
    }
    <span style="color:#66d9ef">let</span> coin2 <span style="color:#f92672">=</span> Coin::Quater(UsState::Alabama);
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Coin::Quater(state) <span style="color:#f92672">=</span> coin2 {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;State {:?}&#34;</span>, state);
    } <span style="color:#66d9ef">else</span> {
        count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
    }
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="mods">
  Mods
  <a class="anchor" href="#mods">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>mods</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <p>main.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> rust_comm;

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> a {
	<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> sers {
		<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> of {
			<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">nest_mods</span>() {}
		}
	}
}

<span style="color:#66d9ef">use</span> a::sers::of;
<span style="color:#66d9ef">use</span> a::sers::of::nest_mods;

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TrffLight</span> {
	Red,
	Yellow,
	Green,
}

<span style="color:#75715e">// use green은 제외
</span><span style="color:#75715e">// use TrffLight::{Red, Yellow};
</span><span style="color:#75715e">// use에서 전체 포함
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> TrffLight::<span style="color:#f92672">*</span>;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
	rust_comm::client::connect();
	<span style="color:#75715e">// importing names
</span><span style="color:#75715e"></span>	a::sers::of::nest_mods();
	<span style="color:#75715e">// use short type
</span><span style="color:#75715e"></span>	of::nest_mods();
	<span style="color:#75715e">// use short type
</span><span style="color:#75715e"></span>	nest_mods();

	<span style="color:#66d9ef">let</span> red <span style="color:#f92672">=</span> Red;
	<span style="color:#66d9ef">let</span> yellow <span style="color:#f92672">=</span> Yellow;
	<span style="color:#75715e">//let green1 = TrffLight::Green;
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">let</span> green2 <span style="color:#f92672">=</span> Green;
}
</code></pre></div><p>lib.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">// rust_comm
</span><span style="color:#75715e">// ⨽ network
</span><span style="color:#75715e">// ⨽ client
</span><span style="color:#75715e">// // network::connect()
</span><span style="color:#75715e">// mod network {
</span><span style="color:#75715e">//     fn connect() {
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// // client::connect()
</span><span style="color:#75715e">// mod client {
</span><span style="color:#75715e">//     fn connect() {
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// rust_comm
</span><span style="color:#75715e">// ⨽ network
</span><span style="color:#75715e">//   ⨽ client
</span><span style="color:#75715e">// network::connect
</span><span style="color:#75715e">// network::client::connect
</span><span style="color:#75715e">// mod network {
</span><span style="color:#75715e">//     fn connect() {}
</span><span style="color:#75715e">//     mod client {
</span><span style="color:#75715e">//         fn connect() {}
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// rust_comm
</span><span style="color:#75715e">// ⨽ client
</span><span style="color:#75715e">// ⨽ network
</span><span style="color:#75715e">//   ⨽ server
</span><span style="color:#75715e">// client
</span><span style="color:#75715e">// mod client {
</span><span style="color:#75715e">//     fn connect() {
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">// }
</span><span style="color:#75715e">// // network
</span><span style="color:#75715e">// // network::server
</span><span style="color:#75715e">// mod network {
</span><span style="color:#75715e">//     fn connect() {
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">//     mod server {
</span><span style="color:#75715e">//         fn connect() {
</span><span style="color:#75715e">//         }
</span><span style="color:#75715e">//     }
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// src/client.rs
</span><span style="color:#75715e"></span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> client;

<span style="color:#75715e">// src/networ.rs
</span><span style="color:#75715e"></span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> network;

<span style="color:#75715e">// src/network/client2.rs
</span><span style="color:#75715e">// pub mod client2;
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">mod</span> outm {
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">midd_func</span>() {}
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">midd_scrt_func</span>() {}

    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">mod</span> insd {
        <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">innr_func</span>() {}
        <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">scrt_func</span>() {}
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">try_me</span>() {
    outm::midd_func();
    outm::midd_scrt_func();
    outm::insd::innr_func();
    outm::insd::scrt_func();
}

<span style="color:#75715e">#[cfg(test)]</span>
<span style="color:#66d9ef">mod</span> tests {
    <span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::client2;

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_works</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>);
        <span style="color:#75715e">// client2::connect();
</span><span style="color:#75715e"></span>        client2::connect();
    }
}
</code></pre></div><p>client.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">connect</span>() {}
</code></pre></div><p>\network\mod.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">connect</span>() {}

<span style="color:#66d9ef">mod</span> server;
</code></pre></div><p>\network\server.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">connect</span>() {}
</code></pre></div><p>\network\client2.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">connect2</span>() {}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="collections">
  Collections
  <a class="anchor" href="#collections">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>vectors</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">SpreadsheetCell</span> {
    Int(<span style="color:#66d9ef">i32</span>),
    Float(<span style="color:#66d9ef">f64</span>),
    Text(String),
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// generic
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> v1: Vec<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> Vec::new();
    <span style="color:#66d9ef">let</span> v1 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v1);

    <span style="color:#75715e">// push
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> v1 <span style="color:#f92672">=</span> Vec::new();
    v1.push(<span style="color:#ae81ff">5</span>);
    v1.push(<span style="color:#ae81ff">6</span>);
    v1.push(<span style="color:#ae81ff">7</span>);
    v1.push(<span style="color:#ae81ff">8</span>);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v1);

    <span style="color:#75715e">// vector scope
</span><span style="color:#75715e"></span>    {
        <span style="color:#66d9ef">let</span> v2 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>];
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v2);
    }
    <span style="color:#75715e">// println!(&#34;{:?}&#34;, v2);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// get
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> v3 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> third: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">i32</span> <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>v3[<span style="color:#ae81ff">2</span>];
    <span style="color:#66d9ef">let</span> fourth: Option<span style="color:#f92672">&lt;&amp;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> v3.get(<span style="color:#ae81ff">3</span>);
    <span style="color:#66d9ef">let</span> sixth: Option<span style="color:#f92672">&lt;&amp;</span><span style="color:#66d9ef">i32</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> v3.get(<span style="color:#ae81ff">5</span>);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?},{:?},{:?}&#34;</span>, third, fourth, sixth);

    <span style="color:#75715e">// Vecto Push (???)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> v4 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>];
    <span style="color:#66d9ef">let</span> second <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>v4[<span style="color:#ae81ff">1</span>];
    v4.push(<span style="color:#ae81ff">6</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v4);

    <span style="color:#75715e">// Vector + for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> v5 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>];
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#f92672">&amp;</span>v5 {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, i);
    }
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v5);

    <span style="color:#75715e">// Vector + for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> v5 <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>];
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> v5 {
        <span style="color:#f92672">*</span>i <span style="color:#f92672">+=</span> <span style="color:#ae81ff">50</span>;
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, i);
    }
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, v5);

    <span style="color:#75715e">// enum
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> row <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[
        SpreadsheetCell::Int(<span style="color:#ae81ff">3</span>),
        SpreadsheetCell::Text(String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>)),
        SpreadsheetCell::Float(<span style="color:#ae81ff">10.12</span>),
    ];
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, row);
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>string</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// str1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str1 <span style="color:#f92672">=</span> String::new();
    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello there?&#34;</span>;
    <span style="color:#75715e">// str2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> dat1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;initial contents&#34;</span>;
    <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> dat1.to_string();
    <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;initial contents&#34;</span>.to_string();

    <span style="color:#75715e">// str3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str3 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;This is Pen&#34;</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} , {} , {}&#34;</span>, str1, str2, str3);

    <span style="color:#75715e">// str utf8
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;السلام عليكم&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Dobrý den&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Hello&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;שָׁלוֹם&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;नमस्ते&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;こんにちは&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;안녕하세요&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;你好&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Olá&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Здравствуйте&#34;</span>);
    <span style="color:#66d9ef">let</span> hello <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Hola&#34;</span>);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, hello);

    <span style="color:#75715e">// push
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str4 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;foo&#34;</span>);
    str4.push_str(<span style="color:#e6db74">&#34;bar&#34;</span>);
    str4.push_str(<span style="color:#e6db74">&#34;quz&#34;</span>);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str4);

    <span style="color:#75715e">// push_str : ownership
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str5 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;foo&#34;</span>);
    <span style="color:#66d9ef">let</span> str6 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bar&#34;</span>;
    str5.push_str(<span style="color:#f92672">&amp;</span>str6);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{} , {}&#34;</span>, str5, str6);

    <span style="color:#75715e">// push (lol)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> str7 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;lo&#34;</span>);
    str7.push(<span style="color:#e6db74">&#39;l&#39;</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str7);

    <span style="color:#75715e">// combine
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str8 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Hello,&#34;</span>);
    <span style="color:#66d9ef">let</span> str9 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;World!&#34;</span>);
    <span style="color:#75715e">// let str10 = str8 + str9; //expected `&amp;str`, found struct `std::string::String`
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// add moethod -&gt; fn add(self, s: &amp;str) -&gt; String {}
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// &amp;String -&gt; &amp;str : deref coercion
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str10 <span style="color:#f92672">=</span> str8 <span style="color:#f92672">+</span> <span style="color:#f92672">&amp;</span>str9;
    <span style="color:#75715e">//println!(&#34;{}&#34;, str8); //value borrowed here after move
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str9);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str10);

    <span style="color:#75715e">// +
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str11 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;tic&#34;</span>);
    <span style="color:#66d9ef">let</span> str12 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;tac&#34;</span>);
    <span style="color:#66d9ef">let</span> str13 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;toe&#34;</span>);

    <span style="color:#66d9ef">let</span> str14 <span style="color:#f92672">=</span> str11 <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">&amp;</span>str12 <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">&amp;</span>str13;
    <span style="color:#75715e">// println!(&#34;{}&#34;, str11);
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str12);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str13);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str14);

    <span style="color:#75715e">// format!
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str11 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;tic&#34;</span>);
    <span style="color:#66d9ef">let</span> str15 <span style="color:#f92672">=</span> format<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}-{}-{}&#34;</span>, str11, str12, str13);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str15);

    <span style="color:#66d9ef">let</span> str16 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;hello wrold&#34;</span>);
    <span style="color:#75715e">//let str17 = str16[3]; //std::string::String` cannot be indexed by
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// &#34;Hello&#34; &#34;Здравствуйте&#34; &#34;안녕하십니까&#34; &amp;str16[0] = ???
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str17 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>str16[<span style="color:#ae81ff">0</span>..<span style="color:#ae81ff">4</span>];
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, str17);

    <span style="color:#75715e">// Panic
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let str16 = String::from(&#34;안녕하십니까&#34;);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let str17 = &amp;str16[0..1];
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// println!(&#34;{}&#34;, str17);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// string for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> chr <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#34;안녕하십니까?&#34;</span>.chars() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, chr);
    }
    <span style="color:#75715e">// string for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> byt <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#34;안녕하십니까?&#34;</span>.bytes() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, byt);
    }
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>hashmap</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">use</span> std::collections::HashMap;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// Hash map 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> scores <span style="color:#f92672">=</span> HashMap::new();
    scores.insert(String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>), <span style="color:#ae81ff">10</span>);
    scores.insert(String::from(<span style="color:#e6db74">&#34;Yellow&#34;</span>), <span style="color:#ae81ff">50</span>);

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, scores);

    <span style="color:#75715e">// hash map 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> teams <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>), String::from(<span style="color:#e6db74">&#34;Yellow&#34;</span>)];
    <span style="color:#66d9ef">let</span> init_scores <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">50</span>];
    <span style="color:#66d9ef">let</span> score2: <span style="color:#a6e22e">HashMap</span><span style="color:#f92672">&lt;</span>_, _<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> teams.iter().zip(init_scores.iter()).collect();

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, score2);

    <span style="color:#66d9ef">let</span> field_nm <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;favorite color&#34;</span>);
    <span style="color:#66d9ef">let</span> field_val <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>);

    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> map <span style="color:#f92672">=</span> HashMap::new();
    map.insert(field_nm, field_val);
    <span style="color:#75715e">//println!(&#34;{:?}&#34;, field_nm); // value borrowed here after move
</span><span style="color:#75715e"></span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, map);

    <span style="color:#75715e">// hash map 3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> team_nm <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>);
    <span style="color:#66d9ef">let</span> score <span style="color:#f92672">=</span> scores.get(<span style="color:#f92672">&amp;</span>team_nm);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, score);

    <span style="color:#75715e">// hash map for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (key, value) <span style="color:#66d9ef">in</span> <span style="color:#f92672">&amp;</span>scores {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}:{}&#34;</span>, key, value);
    }

    <span style="color:#75715e">// hashmap insert
</span><span style="color:#75715e"></span>    scores.insert(String::from(<span style="color:#e6db74">&#34;Blue&#34;</span>), <span style="color:#ae81ff">25</span>);

    <span style="color:#75715e">// hash map for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (key, value) <span style="color:#66d9ef">in</span> <span style="color:#f92672">&amp;</span>scores {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}:{}&#34;</span>, key, value);
    }

    <span style="color:#75715e">// hashmap or insert
</span><span style="color:#75715e"></span>    scores.entry(String::from(<span style="color:#e6db74">&#34;Red&#34;</span>)).or_insert(<span style="color:#ae81ff">15</span>);

    <span style="color:#75715e">// hash map for
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (key, value) <span style="color:#66d9ef">in</span> <span style="color:#f92672">&amp;</span>scores {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}:{}&#34;</span>, key, value);
    }

    <span style="color:#66d9ef">let</span> text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello World Wonderful World Very Wonderful World And Hello Agin&#34;</span>;
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> map <span style="color:#f92672">=</span> HashMap::new();

    <span style="color:#66d9ef">for</span> word <span style="color:#66d9ef">in</span> text.split_whitespace() {
        <span style="color:#66d9ef">let</span> count <span style="color:#f92672">=</span> map.entry(word).or_insert(<span style="color:#ae81ff">0</span>); <span style="color:#75715e">// return &amp;mut V
</span><span style="color:#75715e"></span>        <span style="color:#f92672">*</span>count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
    }

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, map);
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="error-handling">
  Error Handling
  <a class="anchor" href="#error-handling">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>error handling</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">use</span> std::fs::File;
<span style="color:#66d9ef">use</span> std::io;
<span style="color:#75715e">// use std::io::ErrorKind;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> std::io::Read;

<span style="color:#75715e">// enum Result&lt;T, E&gt; {
</span><span style="color:#75715e">//     Ok(T),
</span><span style="color:#75715e">//     Err(E),
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">read_from_file1</span>() -&gt; Result<span style="color:#f92672">&lt;</span>String, io::Error<span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">let</span> f <span style="color:#f92672">=</span> File::open(<span style="color:#e6db74">&#34;not_exist_file.txt&#34;</span>);

    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> f <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> f {
        Ok(file) <span style="color:#f92672">=&gt;</span> file,
        Err(e) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> Err(e),
    };

    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> s <span style="color:#f92672">=</span> String::new();

    <span style="color:#66d9ef">match</span> f.read_to_string(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> s) {
        Ok(_) <span style="color:#f92672">=&gt;</span> Ok(s),
        Err(e) <span style="color:#f92672">=&gt;</span> Err(e),
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">read_from_file2</span>() -&gt; Result<span style="color:#f92672">&lt;</span>String, io::Error<span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> f <span style="color:#f92672">=</span> File::open(<span style="color:#e6db74">&#34;not_exist_file.txt&#34;</span>)<span style="color:#f92672">?</span>;
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> s <span style="color:#f92672">=</span> String::new();
    f.read_to_string(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> s)<span style="color:#f92672">?</span>;
    Ok(s)
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">read_from_file3</span>() -&gt; Result<span style="color:#f92672">&lt;</span>String, io::Error<span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> s <span style="color:#f92672">=</span> String::new();
    File::open(<span style="color:#e6db74">&#34;not_exist_file.txt&#34;</span>)<span style="color:#f92672">?</span>.read_to_string(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> s)<span style="color:#f92672">?</span>;
    Ok(s)
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// panic direct call
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// panic!(&#34;crash and burn&#34;);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// println!(&#34;Hello, world!&#34;);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// panic library call (buffer overread)
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let v = vec![1, 2, 3];
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// v[99];
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// RUST_BACKTRACE=full cargo run
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Error
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let f: u32 = File::open(&#34;not_exists_file.txt&#34;);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Error Match
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let f = File::open(&#34;not_exists_file.txt&#34;);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let f = match f {
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     Ok(file) =&gt; file,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     Err(ref error) if error.kind() == ErrorKind::NotFound =&gt; {
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//         match File::create(&#34;not_exists_file.txt&#34;) {
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//             Ok(fc) =&gt; fc,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//             Err(e) =&gt; panic!(&#34;Tried Create {:?}&#34;, e),
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//         }
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     }
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     Err(error) =&gt; panic!(&#34;Error {:?}&#34;, error),
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// };
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Error with unwrap
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let f = File::open(&#34;not_exists_file.txt&#34;).unwrap();
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Error with expect
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let f = File::open(&#34;not_exists_file.txt&#34;).expect(&#34;Failed&#34;);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Error propagating
</span><span style="color:#75715e"></span>    read_from_file1();

    <span style="color:#75715e">// Error propagating 2
</span><span style="color:#75715e"></span>    read_from_file2();

    <span style="color:#75715e">// Error propagating 3
</span><span style="color:#75715e"></span>    read_from_file3();

    <span style="color:#75715e">// ? without return Error
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let x = File::open(&#34;not_exists_file.txt&#34;)?;
</span><span style="color:#75715e"></span>}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="generic-trait-lifetime">
  Generic, Trait, Lifetime
  <a class="anchor" href="#generic-trait-lifetime">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>generic</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">find_max_num</span>(nums: <span style="color:#66d9ef">&amp;</span>[<span style="color:#66d9ef">i32</span>]) -&gt; <span style="color:#66d9ef">i32</span> {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> num_max <span style="color:#f92672">=</span> nums[<span style="color:#ae81ff">0</span>];

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">&amp;</span>num <span style="color:#66d9ef">in</span> nums.iter() {
        <span style="color:#66d9ef">if</span> num <span style="color:#f92672">&gt;</span> num_max {
            num_max <span style="color:#f92672">=</span> num;
        }
    }

    num_max
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">find_max_chr</span>(chrs: <span style="color:#66d9ef">&amp;</span>[char]) -&gt; <span style="color:#a6e22e">char</span> {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> chr_max <span style="color:#f92672">=</span> chrs[<span style="color:#ae81ff">0</span>];

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">&amp;</span>chr <span style="color:#66d9ef">in</span> chrs.iter() {
        <span style="color:#66d9ef">if</span> chr <span style="color:#f92672">&gt;</span> chr_max {
            chr_max <span style="color:#f92672">=</span> chr;
        }
    }

    chr_max
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">find_max</span><span style="color:#f92672">&lt;</span>T: PartialOrd <span style="color:#f92672">+</span> Copy<span style="color:#f92672">&gt;</span>(list: <span style="color:#66d9ef">&amp;</span>[T]) -&gt; <span style="color:#a6e22e">T</span> {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> item_max <span style="color:#f92672">=</span> list[<span style="color:#ae81ff">0</span>];

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">&amp;</span>item <span style="color:#66d9ef">in</span> list.iter() {
        <span style="color:#66d9ef">if</span> item <span style="color:#f92672">&gt;</span> item_max {
            item_max <span style="color:#f92672">=</span> item;
        }
    }

    item_max
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// Find Max Number 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> nums <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">65</span>];
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> num_max <span style="color:#f92672">=</span> nums[<span style="color:#ae81ff">0</span>];

    <span style="color:#66d9ef">for</span> num <span style="color:#66d9ef">in</span> nums {
        <span style="color:#66d9ef">if</span> num <span style="color:#f92672">&gt;</span> num_max {
            num_max <span style="color:#f92672">=</span> num;
        }
    }

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Number Max : {:?}&#34;</span>, num_max);

    <span style="color:#75715e">// Find Max Number 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> nums <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">102</span>, <span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">6000</span>, <span style="color:#ae81ff">89</span>, <span style="color:#ae81ff">54</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">43</span>, <span style="color:#ae81ff">8</span>];

    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> num_max <span style="color:#f92672">=</span> nums[<span style="color:#ae81ff">0</span>];

    <span style="color:#66d9ef">for</span> num <span style="color:#66d9ef">in</span> nums {
        <span style="color:#66d9ef">if</span> num <span style="color:#f92672">&gt;</span> num_max {
            num_max <span style="color:#f92672">=</span> num;
        }
    }

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Number Max : {:?}&#34;</span>, num_max);

    <span style="color:#75715e">// Find Max Number 3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> nums <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">59</span>, <span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">80</span>];
    <span style="color:#66d9ef">let</span> num_max <span style="color:#f92672">=</span> find_max_num(<span style="color:#f92672">&amp;</span>nums);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Number Max : {:?}&#34;</span>, num_max);

    <span style="color:#75715e">// Find Max Chars 4
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> chrs <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>, <span style="color:#e6db74">&#39;g&#39;</span>, <span style="color:#e6db74">&#39;z&#39;</span>];
    <span style="color:#66d9ef">let</span> chr_max <span style="color:#f92672">=</span> find_max_chr(<span style="color:#f92672">&amp;</span>chrs);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Chars Max : {:?}&#34;</span>, chr_max);

    <span style="color:#75715e">// Find Max 5
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> nums <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">59</span>, <span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">80</span>];
    <span style="color:#66d9ef">let</span> chrs <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>, <span style="color:#e6db74">&#39;g&#39;</span>, <span style="color:#e6db74">&#39;z&#39;</span>];
    <span style="color:#66d9ef">let</span> num_max <span style="color:#f92672">=</span> find_max(<span style="color:#f92672">&amp;</span>nums);
    <span style="color:#66d9ef">let</span> chr_max <span style="color:#f92672">=</span> find_max(<span style="color:#f92672">&amp;</span>chrs);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Number Max : {:?} , Chars Max : {:?}&#34;</span>, num_max, chr_max);

    <span style="color:#75715e">// generic data type 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> int1 <span style="color:#f92672">=</span> Point1 { x: <span style="color:#ae81ff">5</span>, y: <span style="color:#ae81ff">10</span> };
    <span style="color:#66d9ef">let</span> flt1 <span style="color:#f92672">=</span> Point1 { x: <span style="color:#ae81ff">1.0</span>, y: <span style="color:#ae81ff">3.0</span> };
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?},{:?}&#34;</span>, int1, flt1);

    <span style="color:#75715e">// let not_work = Point { x: 5, y: 3.0 };
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// generic data type 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> int1 <span style="color:#f92672">=</span> Point2 { x: <span style="color:#ae81ff">5</span>, y: <span style="color:#ae81ff">10</span> };
    <span style="color:#66d9ef">let</span> flt1 <span style="color:#f92672">=</span> Point2 { x: <span style="color:#ae81ff">1.0</span>, y: <span style="color:#ae81ff">3.0</span> };
    <span style="color:#66d9ef">let</span> mix1 <span style="color:#f92672">=</span> Point2 { x: <span style="color:#ae81ff">5</span>, y: <span style="color:#ae81ff">3.0</span> };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?},{:?},{:?}&#34;</span>, int1, flt1, mix1);

    <span style="color:#75715e">// generic type with method
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> int1 <span style="color:#f92672">=</span> Point1 { x: <span style="color:#ae81ff">3</span>, y: <span style="color:#ae81ff">8</span> };
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;int1.x = {}, int1.y = {}&#34;</span>, int1.x(), int1.y());

    <span style="color:#75715e">// generic type with method 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> pnt1 <span style="color:#f92672">=</span> Point2 { x: <span style="color:#ae81ff">3</span>, y: <span style="color:#ae81ff">10.5</span> };
    <span style="color:#66d9ef">let</span> pnt2 <span style="color:#f92672">=</span> Point2 { x: <span style="color:#e6db74">&#34;Text&#34;</span>, y: <span style="color:#e6db74">&#39;H&#39;</span> };
    <span style="color:#66d9ef">let</span> pnt3 <span style="color:#f92672">=</span> pnt1.mixup(pnt2);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, pnt3);

    <span style="color:#75715e">// zero cost generic &lt;-- monomorphization
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Point1</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> {
    x: <span style="color:#a6e22e">T</span>,
    y: <span style="color:#a6e22e">T</span>,
}

<span style="color:#66d9ef">impl</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> Point1<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">x</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">T</span> {
        <span style="color:#f92672">&amp;</span>self.x
    }
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">y</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">T</span> {
        <span style="color:#f92672">&amp;</span>self.y
    }
}

<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Point2</span><span style="color:#f92672">&lt;</span>A, B<span style="color:#f92672">&gt;</span> {
    x: <span style="color:#a6e22e">A</span>,
    y: <span style="color:#a6e22e">B</span>,
}

<span style="color:#66d9ef">impl</span><span style="color:#f92672">&lt;</span>A, B<span style="color:#f92672">&gt;</span> Point2<span style="color:#f92672">&lt;</span>A, B<span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">mixup</span><span style="color:#f92672">&lt;</span>C, D<span style="color:#f92672">&gt;</span>(self, other: <span style="color:#a6e22e">Point2</span><span style="color:#f92672">&lt;</span>C, D<span style="color:#f92672">&gt;</span>) -&gt; <span style="color:#a6e22e">Point2</span><span style="color:#f92672">&lt;</span>A, D<span style="color:#f92672">&gt;</span> {
        Point2 {
            x: <span style="color:#a6e22e">self</span>.x,
            y: <span style="color:#a6e22e">other</span>.y,
        }
    }
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>trait</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <p>lib.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">trait</span> Summarizable {
	<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">summary</span>(<span style="color:#f92672">&amp;</span>self) -&gt; String;
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">NewsArticle</span> {
	<span style="color:#66d9ef">pub</span> headline: String,
	<span style="color:#66d9ef">pub</span> location: String,
	<span style="color:#66d9ef">pub</span> author: String,
	<span style="color:#66d9ef">pub</span> content: String,
}

<span style="color:#66d9ef">impl</span> Summarizable <span style="color:#66d9ef">for</span> NewsArticle {
	<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">summary</span>(<span style="color:#f92672">&amp;</span>self) -&gt; String {
		format<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}, by {} ({})&#34;</span>, self.headline, self.author, self.location)
	}
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Tweet</span> {
	<span style="color:#66d9ef">pub</span> username: String,
	<span style="color:#66d9ef">pub</span> content: String,
	<span style="color:#66d9ef">pub</span> reply: <span style="color:#66d9ef">bool</span>,
	<span style="color:#66d9ef">pub</span> retweet: <span style="color:#66d9ef">bool</span>,
}

<span style="color:#66d9ef">impl</span> Summarizable <span style="color:#66d9ef">for</span> Tweet {
	<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">summary</span>(<span style="color:#f92672">&amp;</span>self) -&gt; String {
		format<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}: {}&#34;</span>, self.username, self.content)
	}
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">notify</span><span style="color:#f92672">&lt;</span>T: <span style="color:#a6e22e">Summarizable</span><span style="color:#f92672">&gt;</span> (item: <span style="color:#a6e22e">T</span>) { println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Breaking news! {}&#34;</span>, item.summary());}
</code></pre></div><p>main.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">mod</span> lib;

<span style="color:#66d9ef">use</span> lib::Summarizable;
<span style="color:#66d9ef">use</span> lib::Tweet;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">let</span> tweet <span style="color:#f92672">=</span> Tweet {
        username: String::from(<span style="color:#e6db74">&#34;horse_ebooks&#34;</span>),
        content: String::from(<span style="color:#e6db74">&#34;of course, as you probably already know, people&#34;</span>),
        reply: <span style="color:#a6e22e">false</span>,
        retweet: <span style="color:#a6e22e">false</span>,
    };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;1 new tweet: {}&#34;</span>, tweet.summary());
}
</code></pre></div>
    </div>
  </label>
</div>


<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>lifetime</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">use</span> std::fmt::Display;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// dangligh reference 1
</span><span style="color:#75715e"></span>    {
        <span style="color:#66d9ef">let</span> r;
        {
            <span style="color:#66d9ef">let</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
            r <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>x;
        }

        <span style="color:#75715e">// println!(&#34;r: {}&#34;, r); // borrow later used here
</span><span style="color:#75715e"></span>    }

    <span style="color:#75715e">// lifetime 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;abcd&#34;</span>);
    <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xyz&#34;</span>;

    <span style="color:#66d9ef">let</span> rst1 <span style="color:#f92672">=</span> str_long(str1.as_str(), str2);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;the longest string is {}&#34;</span>, rst1);

    <span style="color:#75715e">// lifetime 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;long string is long&#34;</span>);
    {
        <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;xyz&#34;</span>);
        <span style="color:#66d9ef">let</span> rst1 <span style="color:#f92672">=</span> str_long(str1.as_str(), str2.as_str());
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;the longest string is {}&#34;</span>, rst1);
    }
    <span style="color:#75715e">// lifetime 3
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;long string is long&#34;</span>);
    <span style="color:#66d9ef">let</span> rst2;
    {
        <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;xyz&#34;</span>);
        rst2 <span style="color:#f92672">=</span> str_long(str1.as_str(), str2.as_str());
    }
    <span style="color:#75715e">// println!(&#34;the longest string is {}&#34;, rst2);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// struct lifetime
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> novel <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;Call me Ishmael. Some years ago...&#34;</span>);
    <span style="color:#66d9ef">let</span> first_sentence <span style="color:#f92672">=</span> novel.split(<span style="color:#e6db74">&#39;.&#39;</span>).next().expect(<span style="color:#e6db74">&#34;Could not find a &#39;.&#39;&#34;</span>);
    <span style="color:#66d9ef">let</span> i <span style="color:#f92672">=</span> ImportantExcerpt {
        part: <span style="color:#a6e22e">first_sentence</span>,
    };

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{:?}&#34;</span>, i);

    <span style="color:#75715e">// static lifetime
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> s: <span style="color:#66d9ef">&amp;</span>&#39;static <span style="color:#66d9ef">str</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I have a static lifetime.&#34;</span>;

    <span style="color:#66d9ef">let</span> str1 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;abcd&#34;</span>);
    <span style="color:#66d9ef">let</span> str2 <span style="color:#f92672">=</span> String::from(<span style="color:#e6db74">&#34;efg&#34;</span>);
    <span style="color:#75715e">// long with announce
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> rst3 <span style="color:#f92672">=</span> long_with_an_annc(str1.as_str(), str2.as_str(), <span style="color:#e6db74">&#34;what?&#34;</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, rst3);
}

<span style="color:#75715e">// lifetime 명시
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">str_long</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span><span style="color:#f92672">&gt;</span>(x: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>, y: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span> {
    <span style="color:#66d9ef">if</span> x.len() <span style="color:#f92672">&gt;</span> y.len() {
        x
    } <span style="color:#66d9ef">else</span> {
        y
    }
}

<span style="color:#75715e">// lifetime 명시 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">str_lon1</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span><span style="color:#f92672">&gt;</span>(x: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>, y: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span> {
    x
}

<span style="color:#75715e">// // lifetime 명시 2 // error
</span><span style="color:#75715e">// fn str_lon2&lt;&#39;a&gt;(x: &amp;str, y: &amp;str) -&gt; &amp;&#39;a str {
</span><span style="color:#75715e">//     let result = String::from(&#34;long string&#34;);
</span><span style="color:#75715e">//     result.as_str()
</span><span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ImportantExcerpt</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span><span style="color:#f92672">&gt;</span> {
    part: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>,
}

<span style="color:#75715e">// fn first_word&lt;&#39;a&gt;(s: &amp;&#39;a str) -&gt; &amp;&#39;a str {...}
</span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">first_word</span>(s: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span> {
    <span style="color:#66d9ef">let</span> bytes <span style="color:#f92672">=</span> s.as_bytes();

    <span style="color:#66d9ef">for</span> (i, <span style="color:#f92672">&amp;</span>item) <span style="color:#66d9ef">in</span> bytes.iter().enumerate() {
        <span style="color:#66d9ef">if</span> item <span style="color:#f92672">==</span> <span style="color:#e6db74">b&#39; &#39;</span> {
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span>s[<span style="color:#ae81ff">0</span>..i];
        }
    }

    <span style="color:#f92672">&amp;</span>s[..]
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">long_with_an_annc</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span>, T<span style="color:#f92672">&gt;</span>(x: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>, y: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>, ann: <span style="color:#a6e22e">T</span>) -&gt; <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>
<span style="color:#66d9ef">where</span>
    T: <span style="color:#a6e22e">Display</span>,
{
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Announcement! {}&#34;</span>, ann);
    <span style="color:#66d9ef">if</span> x.len() <span style="color:#f92672">&gt;</span> y.len() {
        x
    } <span style="color:#66d9ef">else</span> {
        y
    }
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="testing">
  Testing
  <a class="anchor" href="#testing">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>test</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <p>src/lib.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[derive(Debug)]</span>
<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rectangle</span> {
    length: <span style="color:#66d9ef">u32</span>,
    width: <span style="color:#66d9ef">u32</span>,
}

<span style="color:#66d9ef">impl</span> Rectangle {
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">can_hold</span>(<span style="color:#f92672">&amp;</span>self, other: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">Rectangle</span>) -&gt; <span style="color:#66d9ef">bool</span> {
        self.length <span style="color:#f92672">&gt;</span> other.length <span style="color:#f92672">&amp;&amp;</span> self.width <span style="color:#f92672">&gt;</span> other.width
    }
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add_two</span>(a: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greeting</span>(name: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; String {
    format<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello {}!&#34;</span>, name)
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">just_greeting</span>(name: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; String {
    format<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello!&#34;</span>)
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Guess</span> {
    value: <span style="color:#66d9ef">u32</span>,
}

<span style="color:#66d9ef">impl</span> Guess {
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new</span>(value: <span style="color:#66d9ef">u32</span>) -&gt; <span style="color:#a6e22e">Guess</span> {
        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> value <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span> {
            panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Guess value must be between 1 and 100, got {}.&#34;</span>, value);
        }

        Guess { value }
    }
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new_new</span>(value: <span style="color:#66d9ef">u32</span>) -&gt; <span style="color:#a6e22e">Guess</span> {
        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span> {
            panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Guess value must be between 1 and 100, got {}.&#34;</span>, value);
        }

        Guess { value }
    }
    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new_new_new</span>(value: <span style="color:#66d9ef">u32</span>) -&gt; <span style="color:#a6e22e">Guess</span> {
        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span> {
            panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Value &lt; 1, got {}.&#34;</span>, value);
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span> {
            panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Value &gt; 100, got {}.&#34;</span>, value);
        }

        Guess { value }
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">prints_and_returns_10</span>(a: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;I got the value {}&#34;</span>, a);
    <span style="color:#ae81ff">10</span>
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add_two_num</span>(a: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    internal_adder(a, <span style="color:#ae81ff">2</span>)
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">internal_adder</span>(a: <span style="color:#66d9ef">i32</span>, b: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> b
}

<span style="color:#75715e">#[cfg(test)]</span>
<span style="color:#66d9ef">mod</span> tests {
    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_works_1</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_works_2</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">6</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_works_3</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_works_4</span>() {
        panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Make this fail&#34;</span>);
    }

    <span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::<span style="color:#f92672">*</span>;

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">larger_can_hold_smaller</span>() {
        <span style="color:#66d9ef">let</span> larger <span style="color:#f92672">=</span> Rectangle {
            length: <span style="color:#ae81ff">8</span>,
            width: <span style="color:#ae81ff">7</span>,
        };
        <span style="color:#66d9ef">let</span> smaller <span style="color:#f92672">=</span> Rectangle {
            length: <span style="color:#ae81ff">5</span>,
            width: <span style="color:#ae81ff">1</span>,
        };

        assert<span style="color:#f92672">!</span>(larger.can_hold(<span style="color:#f92672">&amp;</span>smaller));
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">smaller_cannot_hold_larger</span>() {
        <span style="color:#66d9ef">let</span> larger <span style="color:#f92672">=</span> Rectangle {
            length: <span style="color:#ae81ff">8</span>,
            width: <span style="color:#ae81ff">7</span>,
        };
        <span style="color:#66d9ef">let</span> smaller <span style="color:#f92672">=</span> Rectangle {
            length: <span style="color:#ae81ff">5</span>,
            width: <span style="color:#ae81ff">1</span>,
        };

        assert<span style="color:#f92672">!</span>(<span style="color:#f92672">!</span>smaller.can_hold(<span style="color:#f92672">&amp;</span>larger));
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_adds_two</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, add_two(<span style="color:#ae81ff">2</span>));
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_adds_two_ne</span>() {
        assert_ne<span style="color:#f92672">!</span>(<span style="color:#ae81ff">5</span>, add_two(<span style="color:#ae81ff">2</span>));
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greeting_contains_name</span>() {
        <span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> greeting(<span style="color:#e6db74">&#34;Carol&#34;</span>);
        assert<span style="color:#f92672">!</span>(result.contains(<span style="color:#e6db74">&#34;Carol&#34;</span>));
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greeting_without_name</span>() {
        <span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> just_greeting(<span style="color:#e6db74">&#34;Carol&#34;</span>);
        assert<span style="color:#f92672">!</span>(
            result.contains(<span style="color:#e6db74">&#34;Carol&#34;</span>),
            <span style="color:#e6db74">&#34;Greeting did not contain name, value was `{}`&#34;</span>,
            result
        );
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[should_panic]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greater_than_100</span>() {
        Guess::new(<span style="color:#ae81ff">200</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[should_panic]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greater_than_100_2</span>() {
        Guess::new_new(<span style="color:#ae81ff">200</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[should_panic(expected = </span><span style="color:#e6db74">&#34;Value &gt; 100&#34;</span><span style="color:#75715e">)]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greater_than_100_3</span>() {
        Guess::new_new_new(<span style="color:#ae81ff">200</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[should_panic(expected = </span><span style="color:#e6db74">&#34;Value &lt; 1&#34;</span><span style="color:#75715e">)]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greater_than_100_4</span>() {
        Guess::new_new_new(<span style="color:#ae81ff">200</span>);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[should_panic(expected = </span><span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#75715e">)]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">greater_than_100_5</span>() {
        Guess::new_new_new(<span style="color:#ae81ff">200</span>);
    }

    <span style="color:#75715e">// cargo test -- --help
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// cargo test -- --test-threads=1
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// cargo test -- --nocapture
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// cargo test this_test_will_pass
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// cargo test this_test_will_pass -- --nocapture
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// cargo test this_test_will
</span><span style="color:#75715e"></span>    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">this_test_will_pass</span>() {
        <span style="color:#66d9ef">let</span> value <span style="color:#f92672">=</span> prints_and_returns_10(<span style="color:#ae81ff">4</span>);
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">10</span>, value);
    }

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">this_test_will_fail</span>() {
        <span style="color:#66d9ef">let</span> value <span style="color:#f92672">=</span> prints_and_returns_10(<span style="color:#ae81ff">8</span>);
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">5</span>, value);
    }

    <span style="color:#75715e">// cargo test this_test_will -- --ignored
</span><span style="color:#75715e"></span>    <span style="color:#75715e">#[test]</span>
    <span style="color:#75715e">#[ignore]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">this_test_will_expensive_test</span>() {
        <span style="color:#66d9ef">let</span> value <span style="color:#f92672">=</span> prints_and_returns_10(<span style="color:#ae81ff">8</span>);
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">5</span>, value);
    }

    <span style="color:#75715e">// unit test
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::<span style="color:#f92672">*</span>;

    <span style="color:#75715e">#[test]</span>
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">internal</span>() {
        assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, internal_adder(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>));
    }
}
</code></pre></div><p>tests\intg_test.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> rust_test;

<span style="color:#66d9ef">mod</span> common;

<span style="color:#75715e">// cargo test : integrated test
</span><span style="color:#75715e">// cargo test --test intg_test
</span><span style="color:#75715e"></span><span style="color:#75715e">#[test]</span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">it_adds_twx</span>() {
	common::setup();
	assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, rust_test::add_two_num(<span style="color:#ae81ff">2</span>));
}
</code></pre></div><p>test\common\mod.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">setup</span>() {
	println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;TEST WOW&#34;</span>)
}
</code></pre></div>
    </div>
  </label>
</div>

<h3 id="command-line-program">
  Command Line Program
  <a class="anchor" href="#command-line-program">#</a>
</h3>

<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>grep</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <p>src/lib.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">use</span> std::env;
<span style="color:#66d9ef">use</span> std::error::Error;
<span style="color:#66d9ef">use</span> std::fs::File;
<span style="color:#66d9ef">use</span> std::io::prelude::<span style="color:#f92672">*</span>;

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Config</span> {
	<span style="color:#66d9ef">pub</span> pgnm: String,
	<span style="color:#66d9ef">pub</span> quer: String,
	<span style="color:#66d9ef">pub</span> file: String,
	<span style="color:#66d9ef">pub</span> case: <span style="color:#66d9ef">bool</span>,
}

<span style="color:#66d9ef">impl</span> Config {
	<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new</span>(args: <span style="color:#66d9ef">&amp;</span>[String]) -&gt; Result<span style="color:#f92672">&lt;</span>Config, <span style="color:#f92672">&amp;</span>&#39;static <span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> {
		<span style="color:#66d9ef">if</span> args.len() <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span> {
			panic<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;not enough arguments&#34;</span>);
		}

		<span style="color:#66d9ef">let</span> pgnm <span style="color:#f92672">=</span> args[<span style="color:#ae81ff">0</span>].clone();
		<span style="color:#66d9ef">let</span> quer <span style="color:#f92672">=</span> args[<span style="color:#ae81ff">1</span>].clone();
		<span style="color:#66d9ef">let</span> file <span style="color:#f92672">=</span> args[<span style="color:#ae81ff">2</span>].clone();
		<span style="color:#66d9ef">let</span> case <span style="color:#f92672">=</span> env::var(<span style="color:#e6db74">&#34;CASE&#34;</span>).is_err();

		Ok(Config {
			pgnm,
			quer,
			file,
			case,
		})
	}
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">run</span>(conf: <span style="color:#a6e22e">Config</span>) -&gt; Result<span style="color:#f92672">&lt;</span>(), Box<span style="color:#f92672">&lt;</span>Error<span style="color:#f92672">&gt;&gt;</span> {
	<span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> f <span style="color:#f92672">=</span> File::open(conf.file)<span style="color:#f92672">?</span>;
	<span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> cont <span style="color:#f92672">=</span> String::new();
	f.read_to_string(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> cont)<span style="color:#f92672">?</span>;

	<span style="color:#66d9ef">let</span> rslt <span style="color:#f92672">=</span> <span style="color:#66d9ef">if</span> conf.case {
		search(<span style="color:#f92672">&amp;</span>conf.quer, <span style="color:#f92672">&amp;</span>cont)
	} <span style="color:#66d9ef">else</span> {
		search_case_insensitive(<span style="color:#f92672">&amp;</span>conf.quer, <span style="color:#f92672">&amp;</span>cont)
	};

	<span style="color:#75715e">//println!(&#34;With text:\n {}&#34;, cont);
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> line <span style="color:#66d9ef">in</span> rslt {
		println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, line)
	}

	Ok(())
}

<span style="color:#75715e">#[cfg(test)]</span>
<span style="color:#66d9ef">mod</span> test {
	<span style="color:#66d9ef">use</span> <span style="color:#66d9ef">super</span>::<span style="color:#f92672">*</span>;

	<span style="color:#75715e">#[test]</span>
	<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">one_result</span>() {
		<span style="color:#66d9ef">let</span> quer <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;duct&#34;</span>;
		<span style="color:#66d9ef">let</span> cont <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">&#34;\</span>
Rust:<span style="color:#a6e22e">alloc</span>
safe, fast, productive.
Pick three.<span style="color:#960050;background-color:#1e0010">&#34;</span>;

		assert_eq<span style="color:#f92672">!</span>(vec<span style="color:#f92672">!</span>[<span style="color:#e6db74">&#34;safe, fast, productive.&#34;</span>], search(quer, cont));
	}

	<span style="color:#75715e">#[test]</span>
	<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">case_insensitive</span>() {
		<span style="color:#66d9ef">let</span> quer <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;rUsT&#34;</span>;
		<span style="color:#66d9ef">let</span> cont <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">&#34;\</span>
Rust:
<span style="color:#a6e22e">safe</span>, fast, productive.
Pick three.
Trust me.<span style="color:#960050;background-color:#1e0010">&#34;</span>;

		assert_eq<span style="color:#f92672">!</span>(
			vec<span style="color:#f92672">!</span>[<span style="color:#e6db74">&#34;Rust:&#34;</span>, <span style="color:#e6db74">&#34;Trust me.&#34;</span>],
			search_case_insensitive(quer, cont)
		);
	}
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">search</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span><span style="color:#f92672">&gt;</span>(quer: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, cont: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>) -&gt; Vec<span style="color:#f92672">&lt;&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> {
	<span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> rslt <span style="color:#f92672">=</span> Vec::new();

	<span style="color:#66d9ef">for</span> line <span style="color:#66d9ef">in</span> cont.lines() {
		<span style="color:#66d9ef">if</span> line.contains(quer) {
			rslt.push(line);
		}
	}
	rslt
}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">search_case_insensitive</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">&#39;a</span><span style="color:#f92672">&gt;</span>(quer: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, cont: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span>) -&gt; Vec<span style="color:#f92672">&lt;&amp;</span><span style="color:#a6e22e">&#39;a</span> <span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> {
	<span style="color:#66d9ef">let</span> quer <span style="color:#f92672">=</span> quer.to_lowercase();
	<span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> rslt <span style="color:#f92672">=</span> Vec::new();

	<span style="color:#66d9ef">for</span> line <span style="color:#66d9ef">in</span> cont.lines() {
		<span style="color:#66d9ef">if</span> line.to_lowercase().contains(<span style="color:#f92672">&amp;</span>quer) {
			rslt.push(line);
		}
	}

	rslt
}
</code></pre></div><p>src/main.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> rust_grep;

<span style="color:#66d9ef">use</span> rust_grep::Config;
<span style="color:#66d9ef">use</span> std::env;
<span style="color:#66d9ef">use</span> std::process;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">let</span> args: Vec<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> env::args().collect();
    <span style="color:#75715e">//let conf = parse_config(&amp;args);
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> conf <span style="color:#f92672">=</span> Config::new(<span style="color:#f92672">&amp;</span>args).unwrap_or_else(<span style="color:#f92672">|</span>err<span style="color:#f92672">|</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Problem parsing arguments: {}&#34;</span>, err);
        process::exit(<span style="color:#ae81ff">1</span>);
    });

    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Program Name : {}&#34;</span>, conf.pgnm);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Searching for : {}&#34;</span>, conf.quer);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;In file : {}&#34;</span>, conf.file);

    <span style="color:#75715e">// let mut f = File::open(conf.file).expect(&#34;file not found&#34;);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// let mut cont = String::new();
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// f.read_to_string(&amp;mut cont)
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//     .expect(&#34;Something went wrong reading the file&#34;);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// println!(&#34;With text:\n {}&#34;, cont);
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Err(e) <span style="color:#f92672">=</span> rust_grep::run(conf) {
        eprintln<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Application Error : {}&#34;</span>, e);
        process::exit(<span style="color:#ae81ff">1</span>);
    }
}

<span style="color:#75715e">// fn parse_config(args: &amp;[String]) -&gt; Config {
</span><span style="color:#75715e">//     let pgnm = args[0].clone();
</span><span style="color:#75715e">//     let quer = args[1].clone();
</span><span style="color:#75715e">//     let file = args[2].clone();
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//     Config { pgnm, quer, file }
</span><span style="color:#75715e">// }
</span></code></pre></div>
    </div>
  </label>
</div>

<br>
<span style="float:left"><a href="../"><< 이전글</a></span>
<span style="float:right"><a href="../rust02">다음글 >></a></span>
</article>

            
            

            <footer class="book-footer">
                 <div class="flex flex-wrap justify-between">





</div>
 
                
                
            </footer>

             
<div class="book-comments">
<br>
<br>
<hr> </hr>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "prokoptasis" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div>
 
            

            <label for="menu-control" class="hidden book-menu-overlay"></label>
        </div>

        
    </main>

    
</body>

</html>

     